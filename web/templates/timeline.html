{% extends "base.html" %}

{% block title %}Timeline - Awakener{% endblock %}
{% block page_title %}Timeline{% endblock %}

{% block content %}
<!--
  Timeline Page
  =============
  Chronological history of agent activity.
    - Shows events from timeline.jsonl (maintained by the activator)
    - Supports filtering by type (round, tool, thought, error)
    - Auto-refresh or manual refresh
    - Expandable event details
-->

<!-- ====================================================================== -->
<!-- Toolbar                                                                -->
<!-- ====================================================================== -->
<div class="flex flex-between flex-center mb-lg flex-wrap gap-sm">
  <div class="flex gap-sm flex-wrap">
    <button class="btn btn-sm btn-outline filter-btn active" data-filter="all" onclick="setFilter('all')">
      <span data-i18n="timeline.all">All</span>
    </button>
    <button class="btn btn-sm btn-outline filter-btn" data-filter="round" onclick="setFilter('round')">
      &#x1F504; <span data-i18n="timeline.rounds">Rounds</span>
    </button>
    <button class="btn btn-sm btn-outline filter-btn" data-filter="tool" onclick="setFilter('tool')">
      &#x1F527; <span data-i18n="timeline.tools">Tools</span>
    </button>
    <button class="btn btn-sm btn-outline filter-btn" data-filter="thought" onclick="setFilter('thought')">
      &#x1F4AD; <span data-i18n="timeline.thoughts">Thoughts</span>
    </button>
    <button class="btn btn-sm btn-outline filter-btn" data-filter="error" onclick="setFilter('error')">
      &#x26A0; <span data-i18n="timeline.errors">Errors</span>
    </button>
  </div>
  <div class="flex gap-sm">
    <button class="btn btn-sm btn-outline" onclick="loadTimeline()">
      &#x1F504; <span data-i18n="timeline.refresh">Refresh</span>
    </button>
  </div>
</div>

<!-- ====================================================================== -->
<!-- Timeline entries                                                       -->
<!-- ====================================================================== -->
<div class="timeline" id="timeline">
  <div class="empty-state">
    <div class="empty-state-icon">&#x1F4C5;</div>
    <p data-i18n="timeline.loading">Loading timeline...</p>
  </div>
</div>

<!-- ====================================================================== -->
<!-- Load More Button                                                       -->
<!-- ====================================================================== -->
<div class="flex flex-center mt-lg" id="load-more-wrap" style="display:none;">
  <button class="btn btn-outline" id="load-more-btn">
    <span data-i18n="timeline.loadMore">Load More</span>
  </button>
</div>
{% endblock %}

{% block scripts %}
<script src="/js/timeline.js"></script>
{% endblock %}
