{% extends "base.html" %}

{% block title %}Snapshot - Awakener{% endblock %}
{% block page_title %}System Snapshot{% endblock %}

{% block content %}
<!--
  Snapshot Page
  =============
  Displays the current system asset inventory (services, projects, tools, etc.)
  maintained by the snapshot auditor.
-->

<div class="snapshot-header mb-md">
  <div class="text-muted">
    <span data-i18n="snapshot.lastUpdated">Last Updated</span>:
    <span id="meta-updated">-</span>
    &nbsp;|&nbsp;
    <span data-i18n="snapshot.round">Round</span>:
    <span id="meta-round">-</span>
  </div>
</div>

<div id="snapshot-content" class="hidden">
  <!-- Services (full width) -->
  <div class="card mb-md">
    <h3 class="card-title" data-i18n="snapshot.services">Services</h3>
    <div class="table-responsive">
      <table class="table" id="services-table">
        <thead>
          <tr>
            <th data-i18n="snapshot.serviceName">Name</th>
            <th data-i18n="snapshot.port">Port</th>
            <th data-i18n="snapshot.status">Status</th>
            <th data-i18n="snapshot.health">Health</th>
            <th data-i18n="snapshot.path">Path</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <div id="services-empty" class="text-muted text-center py-md hidden" data-i18n="snapshot.noServices">No services found</div>
  </div>

  <!-- Two-column layout -->
  <div class="snapshot-two-col">
    <!-- Left column: Documents -->
    <div class="card">
      <h3 class="card-title" data-i18n="snapshot.documents">Documents</h3>
      <div id="documents-list" class="list-group"></div>
      <div id="documents-empty" class="text-muted text-center py-md hidden" data-i18n="snapshot.noDocuments">No documents found</div>
    </div>

    <!-- Right column: Projects, Tools, Issues, Environment -->
    <div class="snapshot-right-col">
      <!-- Projects -->
      <div class="card mb-md">
        <h3 class="card-title" data-i18n="snapshot.projects">Projects</h3>
        <div id="projects-list" class="snapshot-projects-list"></div>
        <div id="projects-empty" class="text-muted text-center py-md hidden" data-i18n="snapshot.noProjects">No projects found</div>
      </div>

      <!-- Tools -->
      <div class="card mb-md">
        <h3 class="card-title" data-i18n="snapshot.tools">Tools</h3>
        <div id="tools-list" class="list-group"></div>
        <div id="tools-empty" class="text-muted text-center py-md hidden" data-i18n="snapshot.noTools">No tools found</div>
      </div>

      <!-- Issues -->
      <div class="card mb-md">
        <h3 class="card-title" data-i18n="snapshot.issues">Issues</h3>
        <div id="issues-list" class="list-group"></div>
        <div id="issues-empty" class="text-muted text-center py-md hidden" data-i18n="snapshot.noIssues">No open issues</div>
      </div>

      <!-- Environment -->
      <div class="card">
        <h3 class="card-title" data-i18n="snapshot.environment">Environment</h3>
        <div id="env-grid" class="key-value-grid"></div>
      </div>
    </div>
  </div>
</div>

<div id="snapshot-loading" class="text-center py-xl">
  <div class="spinner"></div>
  <div class="mt-sm text-muted" data-i18n="common.loading">Loading...</div>
</div>

<div id="snapshot-empty" class="text-center py-xl hidden">
  <div class="text-xl text-muted mb-sm">&#x1F4CB;</div>
  <div data-i18n="snapshot.empty">No snapshot data available yet.</div>
  <div class="text-sm text-muted mt-xs" data-i18n="snapshot.emptyHint">The snapshot will be generated after the first agent round.</div>
</div>

{% endblock %}

{% block scripts %}
<script src="/js/snapshot.js"></script>
{% endblock %}
